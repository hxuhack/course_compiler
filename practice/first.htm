<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Firsté›†åˆè®¡ç®— </title>
    <style>
    	body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .innerdiv {
            display: flex;
            flex-wrap: wrap; 
        }
        .grammar {
            flex: 0 1 auto;
        }

        .table-container {
            flex: 0 1 auto;
            margin-left: 50px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        td {
            border: 1px solid black;
            width: 30px;
            height: 30px;
            text-align: center;
        }
		
        input {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            text-align: center;
        }

        .correct {
            background-color: green;
        }

        .incorrect {
            background-color: red;
        }
        .reset-button {
            background-color: #777; /* èƒŒæ™¯é¢œè‰²ä¸ºçº¢è‰² */
            color: #fff; /* æ–‡å­—é¢œè‰²ä¸ºç™½è‰² */
            border: none; /* å»æ‰è¾¹æ¡† */
            padding: 10px 20px; /* æ·»åŠ å†…è¾¹è· */
            cursor: pointer; /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºæ‰‹å‹å…‰æ ‡ */
        }
        .submit-button {
            background-color: #aaa; /* èƒŒæ™¯é¢œè‰²ä¸ºçº¢è‰² */
            color: #000; /* æ–‡å­—é¢œè‰²ä¸ºç™½è‰² */
            border: none; /* å»æ‰è¾¹æ¡† */
            padding: 10px 20px; /* æ·»åŠ å†…è¾¹è· */
            cursor: pointer; /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºæ‰‹å‹å…‰æ ‡ */
        }
    </style>
</head>
<body>
	<h1> Firsté›†åˆè®¡ç®— </h1>
	<div class="innerdiv">
	    <div class="grammar">
	        <h2>è®¡ç®—å™¨æ–‡æ³•è§„åˆ™ï¼š</h2>
	        <p>[1] E â†’ E1 E'</p>
	        <p>[2] E' â†’ OP1 E1 E'</p>
	        <p>[3] E' â†’ ğœ–</p>
	        <p>[4] E1 â†’ E2 E1'</p>
	        <p>[5] E1' â†’ OP2 E2 E1'</p>
	        <p>[6] E1' â†’ ğœ–</p>
	        <p>[7] E2 â†’ E3 E2'</p>
	        <p>[8] E2' â†’ OP3 E2</p>
	        <p>[9] E2' â†’ ğœ–</p>
	        <p>[10] E3 â†’ NUM</p>
	        <p>[11] E3 â†’ &lt;LPAR&gt; E &lt;RPAR&gt;</p>
	        <p>[12] NUM â†’ &lt;UNUM&gt;</p>
	        <p>[13] NUM â†’ &lt;SUB&gt; &lt;UNUM&gt;</p>
	        <p>[14] OP1 â†’ &lt;ADD&gt;</p>
	        <p>[15] OP1 â†’ &lt;SUB&gt;</p>
	        <p>[16] OP2 â†’ &lt;MUL&gt;</p>
	        <p>[17] OP2 â†’ &lt;DIV&gt;</p>
	        <p>[18] OP3 â†’ &lt;POW&gt;</p>
	    </div>
	    <div class="table-container">
	        <h1></h1>
	    	<h2>åœ¨è¡¨æ ¼ä¸­å¡«å…¥ç›¸åº”çš„è§„åˆ™ç¼–å·ï¼šå¦‚è§„åˆ™æ˜¯[1]ï¼Œå¡«1å³å¯ï¼Œæ— åŒ¹é…è§„åˆ™å¡«å…¥0ã€‚</h2>
	    	<form id="myForm">
			    <table>
			        <tr>
			      	    <td>  </td>
			            <td> &lt;UNUM &gt; </td>
			            <td> &lt;ADD &gt;</td>
			            <td> &lt;SUB &gt;</td>
			            <td> &lt;MUL &gt;</td>
			            <td> &lt;DIV &gt;</td>
			            <td> &lt;POW &gt;</td>
			            <td> &lt;LPAR &gt;</td>
			            <td> &lt;RPAR &gt;</td>
			            <td> ğœ– </td>
			        </tr>
			        <tr>
			        	<td> E </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> E' </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> E1 </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> E1' </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> E2 </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> E2' </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> E3 </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> NUM </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> OP1 </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> OP2 </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			        <tr>
			        	<td> OP3 </td>
			            <td><input type="text" oninput="checkInput(this, 0)"></td>
			            <td><input type="text" oninput="checkInput(this, 1)"></td>
			            <td><input type="text" oninput="checkInput(this, 2)"></td>
			            <td><input type="text" oninput="checkInput(this, 3)"></td>
			            <td><input type="text" oninput="checkInput(this, 4)"></td>
			            <td><input type="text" oninput="checkInput(this, 5)"></td>
			            <td><input type="text" oninput="checkInput(this, 6)"></td>
			            <td><input type="text" oninput="checkInput(this, 7)"></td>
			            <td><input type="text" oninput="checkInput(this, 8)"></td>
			        </tr>
			    </table>
			    <input type="reset" value="é‡ç½®" class="reset-button">
			    <input type="submit" value="æäº¤" class="submit-button">
		    </form>
		    <p>å¡«å†™æ­£ç¡®æ˜¾ç¤º<span style="background-color: green;">ç»¿è‰²</span>ï¼Œé”™è¯¯æ˜¾ç¤º<span style="background-color: red;">çº¢è‰²</span></p>
	    </div>
	</div>
    <script>
        // æ•°å­—æ•°ç»„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹
        var expectedValues = [
            [1, 0, 1, 0, 0, 0, 1, 0, 0],
            [0, 2, 2, 0, 0, 0, 0, 0, 3],
            [4, 0, 4, 0, 0, 0, 4, 0, 0],
            [0, 0, 0, 5, 5, 0, 0, 0, 6],
            [7, 0, 7, 0, 0, 0, 7, 0, 0],
            [0, 0, 0, 0, 0, 8, 0, 0, 9],
            [10, 0, 10, 0, 0, 0, 11, 0, 0],
            [12, 0, 13, 0, 0, 0, 0, 0, 0],
            [0, 14, 15, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 16, 17, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 18, 0, 0, 0],
        ];
		var loadTime = new Date().getTime();
		localStorage.setItem('pageLoadTime', loadTime);
        // æ£€æŸ¥è¾“å…¥æ˜¯å¦æ­£ç¡®ï¼Œå¹¶åº”ç”¨ç›¸åº”çš„æ ·å¼
        function checkInput(inputElement, columnIndex) {
            var rowIndex = inputElement.parentElement.parentElement.rowIndex - 1; // è·å–è¡Œç´¢å¼•

            var expectedValue = expectedValues[rowIndex][columnIndex];
            var inputValue = inputElement.value;

            if (inputValue === expectedValue.toString()) {
                inputElement.classList.remove("incorrect");
                inputElement.classList.add("correct");
            } else {
                inputElement.classList.remove("correct");
                inputElement.classList.add("incorrect");
            }
        }
        document.getElementById("myForm").addEventListener("submit", function(event) { 
        	event.preventDefault(); // é˜»æ­¢è¡¨å•çš„é»˜è®¤æäº¤è¡Œä¸º
        	var storedLoadTime = localStorage.getItem('pageLoadTime');
			if (storedLoadTime) {
  				var currentTime = new Date().getTime();
  				var duration = currentTime - parseInt(storedLoadTime);
  				var sec = Math.floor(duration / 1000);
  				var min = Math.floor(sec / 60);
  				//var myWindow = window.open("", "ç”¨æ—¶", "width=300,height=200");
				//myWindow.document.write("ç”¨æ—¶ï¼š" + min + "åˆ†" + sec%60 + "ç§’");
				//const formData = new FormData(this);
				
				const data = {"ç”¨æ—¶": min + "åˆ†" + sec%60 + "ç§’"}
				const url = 'http://10.177.85.36:1024/log'; // ç›®æ ‡æœåŠ¡å™¨åœ°å€
				fetch(url, {
				  method: 'POST',
				  headers: {
				    'Content-Type': 'application/json', // æ ¹æ®æ•°æ®ç±»å‹è®¾ç½®é€‚å½“çš„Content-Type
				  },
				  //body: JSON.stringify({data, formData})
				  body: JSON.stringify(data)
				})
				  .then((response) => {
				    if (!response.ok) {
				      throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥');
				    }
				    return response.json();
				  })
				  .then((responseData) => {
				    // å¤„ç†æœåŠ¡å™¨å“åº”
				    console.log('æœåŠ¡å™¨å“åº”æ•°æ®:', responseData);
				  })
				  .catch((error) => {
				    console.error('å‘ç”Ÿé”™è¯¯:', error);
				  });
		}
	});
    </script>
</body>
</html>
